# 1. IoC컨테이너와 DI

* 스프링 컨테이너, IoC 컨테이너 

        스프링 애플리케이션에서는 오브젝트의 생성과 관계설정, 사용, 제거 등의 작업을 애플리케이션 코드 대신 독립된 컨테이너가
        담당한다. 
        
        컨테이너가 코드 대신 오브젝트에 대한 제어권을 갖고 있다고 해서 IoC컨테이너라고 한다.
        
        스프링 컨테이너 또는 IoC컨테이너라고 말하는 것은 BeanFactory 인터페이스를 상속한 ApplicationContext를 구현한 클래스의
        오브젝트 이다.

* Bean Factory ( 빈 팩토리 )

      IoC컨테이너를 오브젝트의 생성과 오브젝트 사이의 런타임 관계를 설정하는 DI 관점으로 볼 때는 컨테이너를 Bean Factory(빈 팩토리)
			라고 한다.

* ApplicationContext (애플리케이션 컨텍스트)

      DI를 위한 빈 팩토리에 엔터프라이즈 애플리케이션을 개발하는데 필요한 여러 가지 컨테이너 기능을 추가한 것을 Application Context
      (애플리케이션 컨텍스트)라고 한다.

* 스프링 애플리케이션은 최소한 하나 이상의 IoC컨테이너, 즉 애플리케이션 컨텍스트 오브젝트를 갖고 있다.

* 생성한 ApplicationContext가 IoC컨테이너로서 동작하려면 두 가지가 필요하다. 바로 POJO 클래스와 설정 메타 정보이다.

* 각자 기능에 충실하게 독립적으로 설계된 POJO 클래스를 만들고 결합도가 낮은 유연한 관계를 가질 수 있도록 인터페이스를 연결해주는 것까지 가 IoC컨테이너가 사용할 POJO를 준비하는 첫단계이다.

* 두번째 단계는 앞에서 만든 POJO 클래스들 중에 애플리케이션에서 사용할 것을 선정하고 이를 IoC컨테이너가 제어할 수 있도록 적절한 메타정보를 만들어 제공하는 작업이다.

* Bean(빈)

      스프링 컨테이너가 관리하는 이런 오브젝트는 Bean이라고 부른다.

* 메타 정보

      설정 메타 정보는 이 빈을 어떻게 만들고 어떻게 동작하게 할 것인가에 관한 정보이다.
      
      스프링의 메타정보는 특정한 파일 포맷이나 형식에 제한되거나 종속되지 않는다.      
      
      빈 메타정보는 빈 아이디, 이름, 별칭, 클래스, 스코프, 프로퍼티 값 또는 참조, 생성자 파라미터 값 또는 참조, 지연된 로딩 여부,
      우선 빈 여부, 자동와이어링 여부 등이 있다.

* BeanDefinition - 빈 정의 인터페이스

      스프링의 설정 메타정보는 BeanDefinition 인터페이스로 표현되는 순수한 추상 정보다.
      
      스프링 IoC컨테이너, 애플리케이션 컨텍스트는 바로 이 BeanDefinition으로 만들어진 메타정보를 담은 오브젝트를 사용해
      IoC와 DI 작업을 수행한다.

      원본의 포맷과 구조, 자료의 특성에 맞게 일겅와 BeanDefinition 오브젝트로 변환해주는 BeanDefinitionReader가 있으면 된다.
      
    * RootBeanDefinition - 가장 기본적인 BeanDefinition 인터페이스 구현 클래스

* 스프링 IoC 컨테이너는 각 빈에 대한 정보를 담은 설정 메타정보를 읽어들인 뒤에 이를 참고해서 빈 오브젝트를 생성하고 프로퍼티나 생성자를 통해 의존 오브젝트를 주입해주는 DI 작업을 수행한다.

* 스프링 애플리케이션이란 POJO 클래스와 설정 메타정보를 이용해 IoC컨테이너가 만들어주는 오브젝트의 조합이라고 할 수 있다.

* ApplicationContext
      
    * StaticApplicationContext

          코드를 통해 빈 메타정보를 등록하기 위해 사용, 학습 테스트를 만들 때를 제외하면 실제로 사용되지 않는다.
      
    * GenericApplicationContext

          가장 일반적인 애플리케이션 컨텍스트의 구현 클래스
      
          XML파일과 같은 외부의 리소스에 있는 빈 설정 메타정보를 리더를 통해 읽어들여서 메타 정보로 전환해서 사용한다.
      
          BeanDefinitionReader 인터페이스를 통해 빈 설정 메타정보를 읽어서 애플리케이션 컨텍스트가 사용할 수 있는 BeanDefinition
          정보로 변환한다.

      * GenericXmlApplicationContext - GenericApplicationContext과 XmlBeanDefinitionReader가 결합된 형태
          
    * WebApplicationContext

          스프링 애플리케이션에서 가장 맣ㄴ이 사용되는 애플리케이션 컨텍스트는 WebApplicationContext이다. 
          이름 그대로 웹 환경에서 사용할 때 필요한 기능이 추가된 애플리케이션 컨텍스트다. 
      
      * XmlWebApplicationContext     
      * AnnotationConfigWebApplicationContext          

* BeanDefinitionReader

    * XMLBeanDefinitionReader

          XML로 작성된 빈 설정정보를 읽어서 컨테이너에게 전달하는 대표적인 빈 설정정보 리더     
      
* 웹 환경에서는 main() 메소드 대신 서블릿 컨테이너가 브라우저로부터 오는 HTTP 요청을 받아서 해당 요청에 매핑되어 있는 서블릿을 실행해주는 방식으로 동작한다. 서블릿이 main() 메소드와 같은 역할을 하는 셈이다.

* 웹 어플리케이션에서 스프링 애플리케이션을 기동시키는 방법은 무엇일까? 일단 main() 메소드 역할을 하는 서블릿을 만들어두고 미리 애플리케이션 컨텍스트를 생성해둔 다음 요청이 서블릿으로 들어올 때 마다 getGBean()으로 필요한 빈을 가져와 정해진 메소드를 실행해주며 된다.
      
* 서블릿 컨테이너는 브라우저와 같은 클라이언트로부터 들어오는 요청을 받아서 서블릿을 동작시켜주는 일을 맡는다. 
 
* 서블릿은 웹 애플리케이션이 시작될 때 미리 만들어둔 웹 어플리케이션 컨텍스트에게 빈 오브젝트로 구성된 애플리케이션의 기동 역할을 해줄 빈을 요청해서 받아둔다.

* 그리고 미리 지정된 메소드를 호출함으로서 스프링 컨테이너가 DI 방식으로 구성해둔 애플리케이션의 기능이 시작되는 것이다.

* DsipatcherServlet
 
      스프링은 웹 환경에서 애플리케이션 컨텍스트를 생성하고 설정 메타 정보로 초기화해주고 클라이언트로부터 들어오는 요청마다
      적절한 빈을 찾아서 이를 실행해주는 기능을 가진 DispatcherServlet이라는 이름의 서블릿을 제공한다. 
      
      스프링이 제공해준 서블릿을 web.xml에 등록하는 것만으로 웹 환경에서 스프링 컨테이너가 만들어지고 애플리케이션을 실행하는 데
      필요한 대부분의 준비는 끝이다.
      
* WebApplicationContext의 특징은 웹환경으로부터 필요한 정보를 가져오거나 웹 환경에 스프링 컨테이너 자신을 노출할 수 있다.



      
      
      
      
      
      
           


