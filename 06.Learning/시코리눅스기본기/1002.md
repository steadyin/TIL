Server 구축 27 + 17 + 12 + 20 + 41 + 14 + 38  + 9 = 2시간 49분
Linux : 4시간 43분
MySQL : 9시간 42분


# NCP

1. Windows 는 유료이기 때문에 별도 비용이 첨부되고 MSSQL은 Windows에서만 사용가능하다.

2. NCP > 요금계산기를 이용해본다.

3. 스토리지는 SSD를 써야한다. IO에서 부하가 심하기 때문에, 근데 노드는 IO를 Nonblock IO를 사용하기 때문에 좀 낫긴 하지만 SSD를 쓰는게 훨씬 빠릅니다.

4. 서버타입은 Standard 했다가 메모리, CPU가 부족할 때 바꾸면 됩니다. 이런 점이 클라우드의 장점입니다.

5. 보통 서버 스펙은 CPU 4개, 메모리 16GB로 가는데 시작이니 CPU 2개, 메모리 8GB로 가도 무방할 것입니다.

6. 이정도 스펙이 스타트업에서 사용하고 있는 스탠다드한 서버라고 생각하시면 됩니다.

7. 사용자가 많아지면 2,3대 늘리는 것이고 소켓이 공유가 안된다거나 그런 코딩이 안되어 있으면 서버 스펙을 늘리면 됩니다. 서버 스펙을 늘려서 버틸때 까지 버티는 겁니다. CPU와 메모리가 많이 향상 되면 네트워크에서 병목이 걸리겠죠. 네트워크도 성능을 향상 시키고 버틸 때 까지 버티는 동안에 이중화 작업을 하는 것이죠. HA 구성을 하는 것입니다.

8. 이제 DB를 구성해보겠습니다. VPC 라는 것은 내부망에 들어가겠다는 것입니다. 서버 타입은 Standard로 시작하고 CPU 2개, 메모리 8 GB, DB는 동접자가 많아지면 여러 커넥션이 붙죠. 우리가 노드가 2인데 또는 클라스터가 2대가 서비스하는데 DB는 1대에요. 그럼 CPU가 1대면 곤란하겠죠. 거기에 맞춰서 CPU를 쓰시면 됩니다. 

9. 마스터 / 슬레이브가 있는데 보시면 아시겠지만 리플리레이션 입니다. MySQL 시간에 배우겠지만 쓰는 것은 Master에서만 쓰고 Read는 슬레이브에서도 가능해요. 게시판을 만든다고 하면 게시판을 쓰는 것은 마스터에다가, 게시판을 읽는 사람들은 80-90%은 슬레이브에 붙겠죠. 그럼 서버가 3대니깐 DB가 병목이 안생깁니다.

10. 그래서 아까 말씀드린 IO에서 네트워크, 디스크, 데이터베이스 3개에서 병목이 많이 발생하는데 맞춰서 하시면 됩니다.
