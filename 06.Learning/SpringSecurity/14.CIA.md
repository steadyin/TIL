자 이번 시간은 보안에 대해서 좀 알아볼게요

여기 A 나라가 있어요. 그리고 B 나라가 있고요. C 나라가 있어요.

그래서 A 나라랑 B 나라가 동맹을 맺은 상태예요. 여기서 A가 B 나라에 문서를 하나 전달한다고 할게요.
C 나라에 들키면 안 되는 중요한 문서를 하나 전달할 거예요. 그러면 문서를 그냥 들고 가게 되면 C 나라에서 중간에 낚아챌수 있단 말이에요.
이 문서를 훔쳐가지고 C 나라에서 A 나라가 B 나라에게 어떤 메시지를 보내는지를 알 수 있어요. 
이걸 뭐라고 하냐면 문서에 CIA라고 있습니다.

CIA라고 하는 게 있는데 C는 Confidentiality라고 해서 기밀성이라고 해요. 기밀성이란건 보안이 노출되면 안 된다는 거예요. 
C 나라가 이 문서를 획득을 했다는 것은 기밀성이 깨진 거예요. 

두 번째로 이 문서를 전달하는데 C 나라가 이 문서를 들고 가서 읽어보고 기밀성 깸과 동시에 자기들이 새로운 문서를 하나 만들어서 B 나라로 전달을 해요. 
이거는 뭐가 깨진 거라고 하냐면 Integrity라고 해서 무결성이라고 합니다. 이 문서를 변경을 했잖아요. 이 변경이 되는 거를 막는 게 무결성이거든요. 
문서가 변경이 돼서 무결성이 깨져요. 

이렇게 되면 이 문서가 B 나라로 전달되는 순간 결국 가용성이 깨진 겁니다. A는 Availability라고 해서 가용성이라고 해요. 
B가 원하는 문서에 접근을 할 수 있는지 없는지 근데 접근을 못했죠. 

왜냐하면 문서가 위조가 됐기 때문에 B 나라에서는 가용성이 깨져요. 결국 일반적인 문서를 그냥 보내게 되면 이 CIA가 다 깨지게 됩니다.

어떤 C 나라에서 이 데이터를 획득하는 순간 그래서 이 CIA를 지켜야 보안을 유지를 할 수 있어요. 

첫 번째로 가용성을 유지하는 방법부터 한번 볼게요. 첫 번째로 가용성을 유지하려면 이 문서를 보낼 때 양옆으로 최고의 전사들을 같이 보내면 이 문서를 뺏기지 않겠죠. 문서를 지키는 거예요. 이게 가용성입니다. 근데 이 최고의 전사라고 해도 C 나라에도 최고의 전사들이 있을 수도 있잖아요. 
그래서 C 나라의 최고의 전사들이 얘들을 다 죽여버리면 문서를 획득할 수 있죠. 기밀성은 유지가 되지 않죠. 

그래서 이 문서를 암호화를 해요. 이 문서를 암호화를 하게 되면 이 문서를 획득 당할 수는 있어도, 가용성이 깨질 수는 있어도 이 문서 자체는 기밀성이 유지가 됩니다. 왜냐하면 이 암호화를 할 때 A 열쇠로 만약에 잠궜다고 생각을 해보세요. 그래서 이 열쇠가 없으면 이 문서를 못 열어요. 
그러면 기밀성이 유지가 되겠죠. 그러면 당연히 가용성을 확보할 수 있습니다. 

근데 A 열쇠로 잠궈도 이 금고가 되게 가벼워요. 하지만 금고 자체를 털어갈 수 있잖아요. 그럼 뭐가 깨지는 거예요. 무결성이 깨지는 거예요. 
그래서 이 금고를 털어갈 수 없게 고정시켜놔야 겠죠. 그래야지 무결성을 유지를 할 수 있어요. 

그리고 이제 A 열쇠가 있으면 금고에 접근해서 데이터를 가져올 수 있고. A 열쇠만 있다고 금고에 접근해서 데이터를 가져올 수 있는 게 아니죠. 
금고가 벽에 딱 달라붙어 있어야지 데 A 열쇠를 가지고 금고에 접근을 하면 가용성도 생길 수 있습니다. 이 CIA에 대해서 먼저 이해를 하셔야 돼요. 이해가 가시나요. 

근데 여기서 문제가 하나 있어요. 어떤 문제가 있냐면 A 열쇠로 잠궜는데 B 나라에서 A 열쇠가 없어서 이 문서를 열어볼 수가 없는 거예요. 
그럼 가용성이 깨지는 거잖아요. 그러면 이 B 나라도 A 열쇠를 가지고 있어야 되겠죠. 그러면 결국은 A 나라에서 A 열쇠를 B 나라한테 결국 전달을 해야 된다는 거죠. 

그때 C 나라에게 A 열쇠를 털릴 수 있잖아요. 문제가 뭐냐면 열쇠 전달에 문제가 있어요.

A 열쇠로 잠그면 A 나라에서는 A 열쇠로 열어보면 되는데 B 나라에서는 A 열쇠가 없으니깐 결국 A 나라로부터 A 열쇠를 받아야 되는데 그렇게 되면 C 나라에서 열쇠를 털릴 수 있다는 거죠.

첫 번째 문제 이해하셨나요. 열쇠 전달의 문제.

두 번째 문제를 한번 볼게요. 만약에 A 청군 | 홍군 | B 청군 이 있어요. 청군은 100명, 100명이고 홍군은 150명인 거예요. 
그래서 이 단일 청군이랑 이 홍군이랑 싸우면 무조건 홍군이 이겨요. 왜냐하면 50명이 많기 때문에.
그러면 청군이 홍군이랑 싸워서 이기려면 방법은 딱 하나예요. 동시에 쳐들어가는거죠. 
그러면 이걸 동시에 쳐들어가려면 문서를 전달을 해야 되겠죠. 근데 이 동시에 쳐들어가자는 문서를 딱 전달을 할 때 중간에 홍군이 탈취 할 수 있겠죠. 
이 문제를 아까 위에서도 얘기를 했어요. 

그러면 이런 문제도 있어요. 무슨 문제도 있냐면 청군이 문서를 이제 전달을 했단 말이에요. 탈취를 안 당한다고 가정을 하고 일단 얘기를 할게요. 문서를 전달했어요. 그럼 청군이 A 청군, B 청군이라고 할게요. A 청군이 문서를 전달했는데 문서 내용이 뭐냐면 2020년 9월 3일 밤 10시에 쳐들어 가자라고 해서 문서를 전달했는데 청군으로부터 응답을 받아야지 청군이 제대로 보냈는지를 알 수 있겠죠. 
그냥 문서만 전달한다고 해서 청군이 받았다는 확신을 할 수가 없잖아요. 그래서 이 문서를 만약에 A 청군이 전달을 했다고 해서 이 날이 쳐들어가면 이긴다는 장담을 하지를 못해요. B 청군이 그 시간에 쳐들어가지 않을 수도 있잖아요. 그래서 항상 뭘 받아야 되냐면 ACK를 받아야 돼요. ACK 응답을 무조건 받아야 돼요. 응답이 오지 않으면 어떻게 되죠. 응답이 오지 않으면 그 시간에 쳐들어가면 안 되겠죠. 

근데 응답이 온다고 해서 그 시간에 찾으러 가면 이긴다는 보장이 있을까요. 나는 이제 문서를 보냈어요. 9월 3일 10시에 쳐들어가자고. 근데 B청군에서 응답이 온 거예요. 그래서 그 시간에 쳐들어갔어요. 막상 쳐들어갔는데 A청군 혼자 가는 거예요. B청군는 안 오고 이럴 수가 있어요. 왜죠. 왜냐하면 문서를 전달하는데 홍군이 가로채서 응답을 할 수가 있겠죠. 

그래서 결국은 중간에서 홍군이 탈취를 했을 때 홍군이 응답을 할 수도 있고 혹은 이렇게 할 수도 있겠죠. 홍군이 문서를 가로채서 문서를 위조를 해서 B청군에게 보내요. 9월 5일이라고 위조를 해서 B청군한테 보내는 거예요. 그래서 B청군이 A청군 에게 응답을 했어요. 이래도 지죠. 
이길 수가 없죠. 

그리고 이럴 수도 있죠. 문서를 전달했는데 잘 간 거예요. 그래서 B청군이 응답을 해준 거예요. 응답을 하는 거를 홍군이 낚아채서 응답을 못하게 한 거죠. 
그래서 전달을 안 하는 거죠. A 청군한테 그러면 B 청군 혼자 9월 3일 날 쳐들어갈 거예요. A 청군은 왜 안 쳐들어가죠. 응답이 안 왔으니까 이래도 이제 전쟁을 지죠. 

그래서 뭘 알아야 되냐면 이 데이터가, 이 문서가 누구로부터 왔는지 이걸 알아야 된단 말이에요. 이걸 모르면 누구로부터 왔는지를 모르면 홍군이 대신 보낼 수도 있단 말이에요. 문서가 누구로 부터 왔는지 알아야돼요. 그럼 문서가 위조됐는지는 어떻게 알 수 있죠. 문서가 위조됐는지는 열쇠 전달의 문제만 해결하면 문서 위조는 불가능하죠. 예를 들어서 A청군 | 홍군 | B청군이 있을 때 청군이 이제 문서를 보냈는데 홍군이 이 문서를 낚아챈 거예요. 그래서 이 문서를  위조를 하고 싶은데 위조를 할 수가 없어요. 왜죠? 문서가 열쇠로 잠겨 있기 때문에. 그래서 열쇠로 잠그기만 하면 문서 위조에 대해서는 해결할 수 있는데

이건 해결을 못해요. 청군이 문서를 보냈는데 홍군이 낚아채서 이 문서 위조는 못하지만 새로운 문서를 만들어서 전달할 수 있겠죠. 이렇게 됐으면 누구로부터 왔는지에 대해서 해결을 해야 돼요. 그래서 이 두 가지 문제 열쇠 전달의 문제와 도대체 이 문서는 누구로부터 왔는지 이 두 개를 해결하기만 하면 보안에 대한 이슈를 해결할 수 있습니다. 

그럼 다음 시간에는 어떻게 해서 이 문제를 해결할 수 있는지 이 방법에 대해서 배워볼게요. 수고하셨습니다. 
그리고 그 부분이 다 해결이 돼야 Json Web Token을 배울 겁니다. 
