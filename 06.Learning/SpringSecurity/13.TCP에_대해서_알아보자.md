그래서 하나의 개념을 더 잡고 하겠습니다. 일단은 되게 간단한 이 TCP라는 게 뭔지 좀 알아볼게요. 
일단 제가 여러분들에게 설명하고 싶은 건 통신이에요. 웹에는 OSI 7계층이라는 게 있습니다. 
간단하게 이 OSI 7계층이 무엇인지 좀 알아볼 건데요. 
너무 구체적으로 알 필요는 없고 포괄적으로 OSI 7계층이 무엇인지에 대해서 좀 알아볼게요. 

그리고 OSI 7계층을 이해해야 TCP IP가 뭔지 알게 되고 이 TCP를 이해해야 우리가 보안이 무엇인지에 대해서 조금 알게 돼요. 그리고 보안이 무엇인지 알게 돼요. 그리고 보안이 무엇인지 알아야 Json Web Token 왜 나오는지에 대해서도 이해를 할 수 있어요. 
그래서 원래 이제 공부를 할 때는 일단 내가 어떤 기술이 하나 나왔을 때 그 기술을 그냥 바로 다이렉트하게 봤을 때 그게 원초적으로 이해가 가지 않는다면 그걸 위한 배경 지식들이 상당히 부족하다는 거거든요.
그걸 위한 배경 지식들이 어느 정도 쌓여 있으면 쉽게 얘기하면 기초가 탄탄하면 이해가 빠르고 머리가 좋고 안 좋거나 다른 문제예요. 근데 이제 내가 기초가 부족하면 이런 문제가 생겼을 때 어떤 새로운 기술을 배울 때는 굉장히 오랜 시간이 걸려요. 
물론 사용은 할 수 있겠죠. 사용은 가능해요. 하지만 이해를 하지 못하겠죠.

고로 내게 되지 않아요. OSI 7계층은 어떻게 나뉘냐면 이런 식으로 나눠요. 

물 데 네 트 세 프 응

물리계층, 데이터링크계층, 네트워크계층, 트랜스포트계층, 세션계층, 프레젠테이션계층, 응용계층이 있습니다.

통신을 하기 위해서는 항상 응용 계층부터 시작해서 물리 계층까지 내려와서 물리 계층에서 실제로 데이터가 전송이 되고 다시 상대방 쪽으로 전송되면 똑같이 물데네트세프응 해서 데이터가 역으로 쭉 올라와서 데이터가 보여요.

그러니까 내가 메일을 하나 보낼 때도 항상 이 과정을 거쳐서 상대방한테 전달이 되는거에요. 예를 한번 들어볼까요. 내가 롤을 한다고 생각해 보세요. 
롤이라는 게임을 하는데 야스오라는 캐릭터로 상대방한테 궁을 썼어요. 그럼 궁을 썼으니까 이 궁이라는 데이터가 전달이 돼야 돼요. 

그럼 응용계층는 내가 롤 프로그램을 사용하고 있다는 게 응용계층입니다. 

그리고 데이터가 암호화 되는게 프리젠테이션 계층입니다. 예를 들어서 비밀번호랑 패스워드를 보내는 거면 되게 중요한 데이터니까 암호를 해야 되겠죠. 혹은 내가 사진을 한 100장을 전송을 하고 싶은데 사진 1장이 너무 무겁잖아요. 그럼 여기서 뭐 해야겠어요. 압축을 해야 되겠죠. 이런 것들을 하는게 프리젠테이션 계층입니다. 

암호화가 되고 이 세션 계층으로 내려와서 상대방 쪽으로 내가 데이터를 보낼 수 있는지 없는지에 대한 인증이 됐는지 안 됐는지 이걸 체크를 해요. 
실제로 내가 상대방한테 보낼 때 인증이 돼 있는지 확인해야 돼요. 인증이 돼 있어야지 보낼 수 있지 인증이 안 돼 있으면 안 보내주겠죠. 
여기서 말하는 인증이라는 거 상대방 컴퓨터가 켜져 있는지 이런 것들을 체크를 하는 거죠. 켜져 있는지 또 내가 상대방 컴퓨터가 켜져 있는데 거기에 접근을 할 수 있는지 접근을 할 수 있는 사람인지 이런 것들을 체크를 해요. 인증이 다 끝났잖아요. 

응용 계층 : 롤 프로그램 궁 스킬 사용
프리젠테이션 : 데이터 암호화(개인정보 암호화, 파일 압축)
세션 계층 : 인증 체크

그러면 뭘 하냐면 트랜스포트 계층에서 TCP 통신을 할지 UDP 통신 할지 결정을 해요. TCP 통신이라는 것과 UDP 통신의 차이는 뭐냐면 TCP부터 설명을 할게요. TCP는 A라는 애가 있고 B라는 애가 있는데 A가 B한테 안녕이라는 메시지를 보내요. 그러면 B가 이 메시지를 받고 이 ACK 신호를 보내요. 잘 받았다고 Acknowledgment라고 하거든요. 그러면 A가 안녕을 잘 받았다는 걸 인식을 하고 그 다음 데이터를 보내요. 반가워. 근데 이번에는 ACK가 B에서 오지 않는거에요. 그럼 얘가 A가 기다리겠죠. 왜 ACK가 안 오지? 기다리다가 끝까지 안 오면 다시 "반가워"를 다시 보냅니다. 
그럼 이번에는 이제 B가 받아서 ACK을 보내주는데 이 ACK을 보내는데 분명히 ACK를 A로 보냈는데 A로 부터 메시지가 안 오는 거예요. 왜 안 오냐면 보내는 도중에 데이터가 유실이 됐다든지 누가 낚아챘다든지 혹은 통신이 끊겼다든지 이런 경우가 있겠죠. 그래서 또 계속 안 오니까 안 오네? 해서 다시 보내요. "반가워" 한 데이터를 그다음에 보내고 나서 얘가 다시 응답을 해요. ACK라고 그러면 또 이제 어 데이터 잘 갔구나 해서 또 다른 데이터를 보낸단 말이에요.  

https://mindnet.tistory.com/entry/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-22%ED%8E%B8-TCP-3-WayHandshake-4-WayHandshake

![image](https://user-images.githubusercontent.com/79847020/145702231-a1c7c541-c0fc-4018-a2d6-a0cb069394fa.png)


TCP 방식은 신뢰성 있는 통신입니다. 내가 보낸 데이터가 잘 갔는지 안 갔는지를 항상 확인을 해요. 근데 이 UDP라는 거는 뭐냐면 쉽게 얘기하면 이거보다 더 복잡합니다. 근데 이게 간단하게 이해만 하시면 돼요. UDP라는 건 뭐냐면 내가 그냥 데이터를 보내는데 안녕 이렇게 보내고 나서 ACK를 안 받아요. 
그리고 반가워 ACK를 안 받아요. ACK, 응답은 신경 쓰지 않아요. 그냥 내가 보내고 싶은 데이터를 무자비하게 보내는 거예요. 그럼 신뢰성이 없는 통신이죠. 왜냐하면 중간에 데이터가 가다가 도착을 못해 안 했을 수도 있잖아요. 근데 그 '반가워' 는 그다지 중요한 데이터가 아니니까 이런 UDP 통신을 쓰겠죠. 신뢰성 없는 통신입니다. 속도는 당연히 UDP가 빨라요. TCP는 느리겠죠. 느립니다. TCP는 무조건 느려요. 근데 이제 보통 어디에서 UDP 통신을 쓰냐면 이제 전화 같은 거 하잖아요. 전화를 할 때도 UDP 통신이 써요. 제가 만약에 안녕하고 나서 반가워라는 거를 음성으로 보냈는데 지지지직 거려서 '반~워' 이렇게 된 거예요. '가'가 끊겼어요. '안녕 반워' 이렇게 해도 이 사람이 목소리가 조금 어눌한 사람이겠구나 생각하고 전화를 받는 사람은 추측해서 이해할 수가 있어요. 

동영상 같은 거를 내가 만약에 보낸다고 생각을 해보세요. 동영상을 스트리밍 할 때도 UDP로 해도 돼요. 왜냐하면 TCP로 해도 상관없지만 왜 UDP로 해도 되냐면 어떤 화면이 전송이 되는데 보통 사람이 사진 파일을 24장을 1초에 동시에 보게 되면 이게 영상으로 보이잖아요. 24프레임 정도. 그러면 이 중간에 사진이 한 장 두 장 이 정도 유실이 된다 해도 사람은 이 동영상은 조금 끊기더라도 이해할 수 있어요. 왜냐하면 추측을 할 수 있으니까.

근데 만약에 비밀번호 비밀번호랑 아이디를 보낸다고 생각을 해보세요. 중간에 끊겼어요. 내가 보내야 되는 게 ssar/1234인데 ssar/12하고 나서 3이 끊겨서 안 날아오는 거예요. 인증이 안 되겠죠. 그래서 이런 거는 UDP로 할 수가 없어요. 그 UDP의 특징은 뭐냐면 사람이 이해할 수 있는 것들은 통신할 때 UDP로 하시면 돼요.

근데 웹은 TCP 통신을 합니다. 신뢰성 있는 통신을 해요. 롤 프로그램이면 당연히 TCP로 하겠죠. 아니면 버그가 일어나겠죠. 

그 다음에 이제 네트워크 계층에서 ip를 결정을 해요. IP를 알아야지 상대방을 찾을 수 있겠죠. 

그 다음에 이제 데이터 링크 계층에서는 뭘 하냐면 ip로 어떤 집을 하나 찾아갔는데 그 집에 공유기가 하나 있고 이 공유기에 컴퓨터가 하나 둘 셋 넷 4개가 몰려 있잖아요. 집 내부의 내부망이 있죠. 데이터링크, 물리계층에서는 LAN 이라고하고 네트워크 트랜스포트 세션 프리젠테이션 응용 계층에서는 WAN이라고 해요 월드 와이드 할 때 WAN, 이건 Wireless 통신 좀 먼 통신을 얘기하고 LAN은 근거리 통신을 얘기해요. 로컬 통신이라고 해서 로컬이 맞나 확실히 모르겠는데 아무튼 그런 의미입니다. LAN 통신은 공유기 내부 통신을 담당하고 있습니다. 그래서 목적지를 찾아가요. 

네트워크 계층에서 IP로 공유기를 찾아가고 공유기 내부망에서 해당 PC를 찾는 것을 데이터링크 계층이라고 이해하면 되요. 

그 다음 물리 계층은 뭐냐면 실제로 물리적인 광케이블 같은 것을 말합니다. 광케이블을 타고 상대방 PC에 들어가 물리계층부터 응용계층까지 역순으로 상대방 PC에 데이터가 전달되게 됩니다. 

이게 OSI 7계층인데 이걸 조금 쉽게 이야기해보겠습니다.

A 회사가 있어요. 여기 사장이 있고 과장이 있고 대리, 사원이 있어요. B 회사에도 사장, 과장, 대리, 사원이 있어요. 근데 A회사 사장님이 어떤 문서를 하나 B회사로 전달하고 싶어요. 문서를 전달할 때 안녕이라는 문서를 하나 전달할 거예요. 그래서 안녕이라는 문서를 저 B회사에 전달해. 근데 중국어로 번역해서 보내라고 하면 이제 과장은 번역만 전문적으로 하는 사람이여서 안녕을 중국어로 번역했어요. 그 다음에 과장이 대리한테 던지는 거예요. 
야 번역이 잘 돼 있는 문서를 서류함에 좀 잘 넣어서 B 회사에 보내. 그럼 대리가 서류봉투에다가 포장을 하는거죠. 그러고 나서 이제 대리가 막상 가려고 하니까 귀찮은 거예요. 왜냐하면 밑에 사원이 있잖아요. 서원한테 이 서류 그냥 그대로 B 회사에 전달만 해. 사원이 이제 전달하는 거죠. 
이쪽으로 B회사에서 중국어로 안녕이라는 서류를 사원이 받았죠. 사원이 대리한테 넘기면 대리가 서류를 풀어요. 중국어 안녕. 그리고 과장이 받는 거예요. 
우리 사장님은 예를 들어서 한국 사람인 거예요. 그럼 과장은 중국어를 다시 한국어로 풀고요. 과장이 사장한테 돌려주면 이 안녕이라는 데이터가 온전하게 전달되겠죠. 그래서 안녕이라는 데이터의 흐름을 보여준 건데 보통 회사에도 이런 식으로 이제 밑으로 내려가면서 사장이 과장한테 시키고 과장한 대리한테 시키고 대리는 사원한테 시키잖아요. 이 과정을 OSI 계층이라고 생각하시면 돼요

이제 여기서 꼭 이해하셔야 될 게 뭐죠 TCP라는 거예요. TCP 여러분들 우리 웹은 TCP 통신을 해요. 그래서 다음 시간에는 이 TCP라는 통신을 할 때 어떤 문제점이 있는지 보안적으로는 어떤 위험이 생길 수가 있는지 이런 거에 대해서 설명을 좀 드릴게요. 이번 시간에 여기까지 하겠습니다. 
수고하셨습니다. 

